autoEntryButton.addEventListener("click", () => {
  // Gửi message đến content script để xử lý trong tab hiện tại
  browser.tabs.query({ active: true, currentWindow: true }).then((tabs) => {
    browser.tabs.sendMessage(tabs[0].id, { action: "autoFillInputs" });
  });
});


browser.runtime.onMessage.addListener((message) => {
  if (message.action === "autoFillInputs") {
    const inputs = document.querySelectorAll("input[type='text'], input[type='email'], input[type='tel'], input:not([type])");

    inputs.forEach(input => {
      if (input.value.trim() !== "") return;

      // Tổng hợp thông tin xung quanh input để đoán loại
      const context = (
        input.placeholder ||
        input.name ||
        input.id ||
        (input.labels && input.labels[0]?.textContent) ||
        input.closest("label")?.textContent ||
        ""
      ).toLowerCase();

      if (/mail|メール|メールアドレス/.test(context)) {
        input.value = "test@gmail.com";
      } else if (/phone|telephone|tel|電話|電話番号/.test(context)) {
        input.value = "08011111111";
      } else {
        input.value = "test";
      }
    });

    console.log("Auto form entry completed.");
  }
});

